@model IEnumerable<VzOverFlow.Models.Tag>
@{
    ViewData["Title"] = "Thẻ (Tags)";
    var search = Context.Request.Query["search"].ToString();
}

<div class="mb-6 flex items-start justify-between gap-4">
    <div>
        <h1 class="text-2xl md:text-3xl font-semibold text-slate-900 mb-1">
            Thẻ (Tags)
        </h1>
        <p class="text-sm text-slate-600">
            Thẻ giúp bạn phân loại câu hỏi theo công nghệ, framework, hoặc chủ đề cụ thể.
        </p>
    </div>
</div>

<form method="get" class="mb-4 flex flex-wrap items-center gap-2 text-sm">
    <input name="search"
           value="@search"
           class="flex-1 min-w-[200px] rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
           placeholder="Tìm theo tên thẻ (ví dụ: c#, asp.net-core)..." />
    <button type="submit"
            class="rounded-md bg-slate-900 text-white px-3 py-2 text-sm hover:bg-slate-800">
        Tìm kiếm
    </button>
</form>

@if (!Model.Any())
{
    <div class="bg-white border border-slate-200 rounded-lg p-4 text-sm text-slate-600">
        Không tìm thấy thẻ nào phù hợp.
    </div>
}
else
{
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3">
        @foreach (var tag in Model.OrderBy(t => t.Name))
        {
            var questionCount = tag.Questions?.Count ?? 0;
            <article class="bg-white border border-slate-200 rounded-lg p-4 shadow-sm hover:border-blue-500 transition-colors">
                <a asp-action="Details" asp-route-name="@tag.Name"
                   class="inline-flex items-center rounded-full bg-slate-100 text-[11px] text-slate-700 px-2 py-0.5 hover:bg-slate-200 mb-2">
                    @tag.Name
                </a>

                <p class="text-xs text-slate-600 line-clamp-3 mb-3">
                    @if (!string.IsNullOrWhiteSpace(tag.Description))
                    {
                        @tag.Description
                    }
                    else
                    {
                        @:Chưa có mô tả cho thẻ này. Bạn có thể dùng thẻ này cho các câu hỏi liên quan đến '@tag.Name'.
                    }
                </p>

                <div class="flex items-center justify-between text-[11px] text-slate-500">
                    <span>@questionCount câu hỏi</span>
                    <a asp-action="Details" asp-route-name="@tag.Name"
                       class="text-blue-600 hover:underline">
                        Xem câu hỏi
                    </a>
                </div>
            </article>
        }
    </div>
}
