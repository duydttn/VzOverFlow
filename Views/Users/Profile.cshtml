@model VzOverFlow.Models.ViewModels.UserProfileViewModel
@{
    ViewData["Title"] = "Hồ sơ người dùng";
    var avatarUrl = $"https://api.dicebear.com/7.x/avataaars/svg?seed={Model.UserName}";
}

<div class="mb-6 flex items-start justify-between gap-4">
    <div class="flex items-center gap-4">
   <img src="@avatarUrl" alt="@Model.UserName" class="h-14 w-14 rounded-full" />
  <div>
            <h1 class="text-2xl font-semibold text-slate-900 mb-1">
    @Model.UserName
            </h1>
   <div class="text-xs text-slate-600 space-x-2">
             <span>@Model.Email</span>
        <span>•</span>
    <span>Tham gia từ @Model.CreatedAt.ToLocalTime().ToString("dd/MM/yyyy")</span>
        </div>
        </div>
    </div>

    <div class="hidden sm:flex flex-col items-end gap-2">
        <div class="text-right">
            <div class="text-xs text-slate-500">Reputation</div>
            <div class="text-2xl font-semibold text-amber-600">@Model.Reputation</div>
            <div class="text-[11px] text-slate-500">Votes nhận được: @(Model.AnswerVotesReceived + Model.QuestionVotesReceived)</div>
        </div>
        <a asp-controller="Users" asp-action="Security"
           class="inline-flex items-center rounded-md border border-slate-200 px-3 py-1.5 text-xs hover:bg-slate-50">
            Cài đặt bảo mật
        </a>
    </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <section class="md:col-span-2 space-y-4">
        <div class="bg-white border border-slate-200 rounded-lg p-4 shadow-sm">
            <h2 class="text-sm font-semibold text-slate-800 mb-3">
                Hoạt động
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center text-xs">
                <div>
                    <div class="text-lg font-semibold text-slate-900">@Model.QuestionCount</div>
                    <div class="text-slate-500">Câu hỏi</div>
                </div>
                <div>
                    <div class="text-lg font-semibold text-slate-900">@Model.AnswerCount</div>
                    <div class="text-slate-500">Trả lời</div>
                </div>
                <div>
                    <div class="text-lg font-semibold text-slate-900">@Model.AcceptedAnswerCount</div>
                    <div class="text-slate-500">Được chấp nhận</div>
                </div>
                <div>
                    <div class="text-lg font-semibold text-slate-900">@Model.VoteCount</div>
                    <div class="text-slate-500">Lượt vote</div>
                </div>
            </div>
        </div>

        <div class="bg-white border border-slate-200 rounded-lg p-4 shadow-sm text-xs text-slate-600">
            <h2 class="text-sm font-semibold text-slate-800 mb-3">Giới thiệu</h2>
            <p>
                Đây là hồ sơ demo. Bạn có thể mở rộng model để lưu thêm tiểu sử, kỹ năng, link GitHub, LinkedIn, v.v.
            </p>
        </div>
    </section>

    <aside class="space-y-4">
        @await Html.PartialAsync("_ReputationCard", Model)
        @await Html.PartialAsync("_GamificationPanel", Model)

        <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 shadow-sm text-xs text-amber-900">
            <h2 class="text-sm font-semibold mb-2">Reputation & Huy hiệu</h2>
            <p class="mb-2">
                Reputation càng cao chứng tỏ bạn đóng góp nhiều câu trả lời chất lượng cho cộng đồng.
            </p>
            <ul class="list-disc list-inside space-y-1">
                <li>+10 khi câu trả lời được vote up</li>
                <li>+15 khi được chấp nhận</li>
                <li>-2 khi bị vote down</li>
            </ul>
        </div>
    </aside>
</div>
